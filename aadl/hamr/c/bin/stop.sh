#!/usr/bin/env bash
#
# Do not edit this file as it will be overwritten if HAMR codegen is rerun
#
APPS="Demo InstrumentationMockThread_i_instrumentationMock_instrumentationMockThread_App EventControlMockThread_i_eventControlMock_eventControlMockThread_App ActuatorsMockThread_i_actuatorsMock_actuatorsMockThread_App CoincidenceLogic_i_actuationSubsystem_actuationUnit1_temperatureLogic_coincidenceLogic_App CoincidenceLogic_i_actuationSubsystem_actuationUnit1_pressureLogic_coincidenceLogic_App CoincidenceLogic_i_actuationSubsystem_actuationUnit1_saturationLogic_coincidenceLogic_App OrLogic_i_actuationSubsystem_actuationUnit1_tempPressureTripOut_orLogic_App CoincidenceLogic_i_actuationSubsystem_actuationUnit2_temperatureLogic_coincidenceLogic_App CoincidenceLogic_i_actuationSubsystem_actuationUnit2_pressureLogic_coincidenceLogic_App CoincidenceLogic_i_actuationSubsystem_actuationUnit2_saturationLogic_coincidenceLogic_App OrLogic_i_actuationSubsystem_actuationUnit2_tempPressureTripOut_orLogic_App OrLogic_i_actuationSubsystem_tempPressureActuatorUnit_actuateTempPressureActuator_orLogic_App Actuator_i_actuationSubsystem_tempPressureActuatorUnit_tempPressureActuator_actuator_App OrLogic_i_actuationSubsystem_saturationActuatorUnit_actuateSaturationActuator_orLogic_App Actuator_i_actuationSubsystem_saturationActuatorUnit_saturationActuator_actuator_App"
for APP in ${APPS}; do
  pkill -SIGTERM -f $APP
done
ME=`whoami`

# message queue
IPCS_Q=`ipcs -q | egrep "[0-9a-f]+[0-9]+" | grep $ME | awk '{print $2}'`
for id in $IPCS_Q; do
  ipcrm -q $id;
done

# shared memory
IPCS_Q=`ipcs -m | egrep "[0-9a-f]+[0-9]+" | grep $ME | awk '{print $2}'`
for id in $IPCS_Q; do
  ipcrm -m $id;
done

# semaphores
IPCS_Q=`ipcs -s | egrep "[0-9a-f]+[0-9]+" | grep $ME | awk '{print $2}'`
for id in $IPCS_Q; do
  ipcrm -s $id;
done
